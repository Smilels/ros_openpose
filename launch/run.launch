<?xml version="1.0"?>
<!--
run.launch: this file does no more than calling other launch file
Author: Ravi Joshi
Date: 2019/11/23
-->
<launch>
  <!-- the value of this argument can only be one of the following: realsense, kinect, zed2, nodepth -->
  <arg name="camera" default="kinect" />

  <!-- set this flag to see invoke RViz -->
  <arg name="rviz" default="false" />

  <!-- set this flag to invoke the visualization of the skeleton -->
  <arg name="skeleton" default="true" />

  <!-- set this flag to see the pointcloud in the visualization inside RViz  -->
  <arg name="pointcloud" default="false" />

  <!-- set this flag to invoke the visualization of the hands of the skeleton -->
  <arg name="skeleton_hands" default="false" />

  <!--
   the standard openpose command-line arguments are also supported.
   to do so, please change the value, as shown in the example below.
  -->

  <!-- full path to the model dir of openpose -->
  <arg name="openpose_args" value=" --model_folder /homeL/shuang/code/openpose/models/ --number_people_max 1"/>

  <!-- rostopic to publish the 3D skeleton data -->
  <arg name="pub_topic" default="/frame" />

  <!-- thickness of the line used to draw skeleton for visualization inside RViz -->
  <arg name="skeleton_line_width" default="0.01" />

  <!-- size of the text used to indicate the id of a skeleton for visualization inside RViz -->
  <arg name="id_text_size" default="0.2" />

  <!-- offeset of the text used to indicate the id of a skeleton for visualization inside RViz -->
  <arg name="id_text_offset" default="-0.05" />

  <!-- flag to enable printing ros message to terminal -->
  <arg name="print_keypoints" default="false" />

  <!-- flag to enable publishing the right wrist data -->
  <arg name="pub_RightWristMsg" default="false" />

  <!-- flag to enable publishing the right wrist data -->
  <arg name="pub_SpineMsg" default="true" />

  <!-- republish the compressed topics -->
  <!-- using the compressed topics can increase the frequency-->
 <node name="republish_depth" type="republish" pkg="image_transport" output="screen"
   args="compressed in:=/kinect2/sd/image_depth_rect raw out:=/kinect2/remapped/sd/image_depth_rect" />

   <node name="republish_color" type="republish" pkg="image_transport" output="screen"
     args="compressed in:=/kinect2/sd/image_color_rect raw out:=/kinect2/remapped/sd/image_color_rect" />

  <include file="$(find ros_openpose)/launch/config_$(arg camera).launch" >
    <arg name="rviz" value="$(arg rviz)" />
    <arg name="print_keypoints" value="$(arg print_keypoints)" />
    <arg name="pub_RightWristMsg" value="$(arg pub_RightWristMsg)" />
    <arg name="pub_SpineMsg" value="$(arg pub_SpineMsg)" />
    <arg name="skeleton" value="$(arg skeleton)" />
    <arg name="pub_topic" value="$(arg pub_topic)" />
    <arg name="pointcloud" value="$(arg pointcloud)" />
    <arg name="id_text_size" value="$(arg id_text_size)" />
    <arg name="openpose_args" value="$(arg openpose_args)" />
    <arg name="skeleton_hands" value="$(arg skeleton_hands)" />
    <arg name="id_text_offset" value="$(arg id_text_offset)" />
    <arg name="skeleton_line_width" value="$(arg skeleton_line_width)" />
  </include>
</launch>
